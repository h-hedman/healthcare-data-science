<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Pathogen Epi Curves â€“ Healthify</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <style>
    body {
      font-family: 'Open Sans', sans-serif;
      background-color: #f9fafa;
      color: #333;
      margin: 0;
      padding: 2rem;
    }

    h2 {
      text-align: center;
      color: #005eb8;
    }

    #plot {
      width: 100%;
      max-width: 900px;
      margin: 0 auto;
    }
  </style>
</head>
<body>

  <h2>Monthly Epidemic Curves by Pathogen</h2>
  <div id="plot"></div>

  <script>
    const csvUrl = "https://raw.githubusercontent.com/h-hedman/healthcare-data-science/refs/heads/main/epidemiological_quarantine_algorithm/output/epi_curve_summary.csv";

    d3.csv(csvUrl).then(data => {
      const months = data.map(d => d.month);

      const pathogens = ["COVID", "Flu", "Lice", "Varicella"];
      const traces = pathogens.map(pathogen => ({
        x: months,
        y: data.map(d => +d[pathogen]),
        mode: 'lines+markers',
        name: pathogen
      }));

      const layout = {
        title: '',
        xaxis: { title: 'Month' },
        yaxis: { title: 'Case Count' },
        legend: { orientation: 'h' }
      };

      Plotly.newPlot('plot', traces, layout, {responsive: true});
    });
  </script>

</body>
</html>
